# MCP & RAG ν”„λ΅μ νΈ - λ…λ¦½μ μΈ κµ¬ν„

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°

```
mcp-rag/
β”β”€β”€ shared/                     # π”„ κ³µν†µ λ¨λ“
β”‚   β”β”€β”€ __init__.py
β”‚   β”β”€β”€ data_parser.py         # ν•κµ­ μ„ν‚¤ ν¬λ΅¤λ§ λ° νμ‹±
β”‚   β”β”€β”€ text_processor.py      # ν…μ¤νΈ μ „μ²λ¦¬ μ ν‹Έλ¦¬ν‹°
β”‚   β””β”€β”€ config.py              # κ³µν†µ μ„¤μ •
β”β”€β”€ rag/                       # π” RAG κµ¬ν„ (λ…λ¦½ μ‹¤ν–‰)
β”‚   β”β”€β”€ __init__.py
β”‚   β”β”€β”€ src/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ vector_store.py    # λ²΅ν„° DB κ΄€λ¦¬
β”‚   β”‚   β”β”€β”€ retriever.py       # λ¬Έμ„ κ²€μƒ‰κΈ°
β”‚   β”‚   β”β”€β”€ generator.py       # λ‹µλ³€ μƒμ„±κΈ°
β”‚   β”‚   β”β”€β”€ pipeline.py        # RAG νμ΄ν”„λΌμΈ
β”‚   β”‚   β””β”€β”€ evaluator.py       # μ„±λ¥ ν‰κ°€ λ„κµ¬
β”‚   β”β”€β”€ scripts/
β”‚   β”‚   β”β”€β”€ step1_prepare_data.py    # 1λ‹¨κ³„: λ°μ΄ν„° μ¤€λΉ„ λ° μ „μ²λ¦¬
β”‚   β”‚   β”β”€β”€ step2_build_vectordb.py  # 2λ‹¨κ³„: λ²΅ν„° DB κµ¬μ¶•
β”‚   β”‚   β”β”€β”€ step3_setup_pipeline.py  # 3λ‹¨κ³„: RAG νμ΄ν”„λΌμΈ μ„¤μ •
β”‚   β”‚   β”β”€β”€ step4_validate.py        # 4λ‹¨κ³„: νμ΄ν”„λΌμΈ κ²€μ¦
β”‚   β”‚   β””β”€β”€ run_all_steps.py         # μ „μ²΄ λ‹¨κ³„ μλ™ μ‹¤ν–‰
β”‚   β”β”€β”€ notebooks/
β”‚   β”‚   β”β”€β”€ query_experiments.ipynb  # π― μΏΌλ¦¬ μ‹¤ν— λ° κ²°κ³Ό λ¶„μ„
β”‚   β”‚   β””β”€β”€ performance_analysis.ipynb # μ„±λ¥ λ¶„μ„ λ° μ‹κ°ν™”
β”‚   β”β”€β”€ config/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β””β”€β”€ rag_config.py      # RAG μ‹μ¤ν… μ„¤μ •
β”‚   β””β”€β”€ requirements_rag.txt   # RAG μ „μ© μμ΅΄μ„±
β”β”€β”€ mcp_server/                # π” MCP μ„λ²„ (Cursor/Claude μ—°κ²°)
β”‚   β”β”€β”€ __init__.py
β”‚   β”β”€β”€ server.py              # MCP μ„λ²„ λ©”μΈ
β”‚   β”β”€β”€ tools/                 # MCP λ„κµ¬λ“¤
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ document_reader.py # λ¬Έμ„ μ½κΈ° λ„κµ¬
β”‚   β”‚   β”β”€β”€ search_tool.py     # κ²€μƒ‰ λ„κµ¬
β”‚   β”‚   β””β”€β”€ knowledge_tool.py  # μ§€μ‹ κ²€μƒ‰ λ„κµ¬
β”‚   β”β”€β”€ handlers/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β”β”€β”€ file_handler.py    # νμΌ μ²λ¦¬
β”‚   β”‚   β””β”€β”€ search_handler.py  # κ²€μƒ‰ μ²λ¦¬
β”‚   β”β”€β”€ config/
β”‚   β”‚   β”β”€β”€ __init__.py
β”‚   β”‚   β””β”€β”€ mcp_config.py      # MCP μ„λ²„ μ„¤μ •
β”‚   β””β”€β”€ requirements_mcp.txt   # MCP μ „μ© μμ΅΄μ„±
β”β”€β”€ data/                      # π“ λ°μ΄ν„° μ €μ¥μ†
β”‚   β”β”€β”€ raw/                   # μ›λ³Έ μ„ν‚¤ λ°μ΄ν„°
β”‚   β”‚   β””β”€β”€ aiml/             # AI/ML κ΄€λ ¨ λ¬Έμ„λ“¤
β”‚   β”β”€β”€ processed/             # μ „μ²λ¦¬λ λ°μ΄ν„°
β”‚   β”‚   β”β”€β”€ chunks/           # λ¬Έμ„ μ²­ν¬λ“¤
β”‚   β”‚   β””β”€β”€ metadata/         # λ©”νƒ€λ°μ΄ν„°
β”‚   β”β”€β”€ vectordb/             # RAGμ© λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤
β”‚   β””β”€β”€ mcp_docs/             # MCPμ© ν…μ¤νΈ νμΌλ“¤
β”β”€β”€ scripts/                   # π€ μ‹¤ν–‰ μ¤ν¬λ¦½νΈλ“¤
β”‚   β”β”€β”€ download_wiki_data.py  # μ„ν‚¤ λ°μ΄ν„° λ‹¤μ΄λ΅λ“
β”‚   β”β”€β”€ setup_all.py          # μ „μ²΄ ν™κ²½ μ„¤μ •
β”‚   β”β”€β”€ run_mcp_server.py     # MCP μ„λ²„ μ‹¤ν–‰
β”‚   β””β”€β”€ test_setup.py         # μ„¤μ • ν…μ¤νΈ
β”β”€β”€ docs/                     # π“ λ¬Έμ„ν™”
β”‚   β”β”€β”€ rag_usage.md          # RAG μ‚¬μ© κ°€μ΄λ“
β”‚   β”β”€β”€ mcp_setup.md          # MCP μ„¤μ • κ°€μ΄λ“
β”‚   β””β”€β”€ data_format.md        # λ°μ΄ν„° ν¬λ§· μ„¤λ…
β”β”€β”€ requirements.txt          # κΈ°λ³Έ κ³µν†µ μμ΅΄μ„±
β”β”€β”€ pyproject.toml           # ν”„λ΅μ νΈ μ„¤μ •
β”β”€β”€ .env.example             # ν™κ²½λ³€μ μμ‹
β””β”€β”€ README.md                # ν”„λ΅μ νΈ μ „μ²΄ κ°€μ΄λ“
```

## π”§ μ£Όμ” μ»΄ν¬λ„νΈ μ„¤λ…

### 1. κ³µν†µ λ¨λ“ (`shared/`)
- **λ°μ΄ν„° νμ‹±**: ν•κµ­ μ„ν‚¤ν”Όλ””μ•„ ν¬λ΅¤λ§ λ° νμ‹±
- **ν…μ¤νΈ μ²λ¦¬**: κ³µν†µ μ „μ²λ¦¬ λ° μ²­ν‚Ή
- **μ„¤μ • κ΄€λ¦¬**: ν™κ²½ λ³€μ λ° κ³µν†µ μ„¤μ •

### 2. RAG μ‹μ¤ν… (`rag/`)
- **λ‹¨κ³„λ³„ μ¤ν¬λ¦½νΈ**: λ°μ΄ν„° μ¤€λΉ„β†’λ²΅ν„°DB κµ¬μ¶•β†’νμ΄ν”„λΌμΈ μ„¤μ •β†’κ²€μ¦
- **μλ™ν™”λ κµ¬μ¶•**: μ „μ²΄ κ³Όμ •μ„ μ¤ν¬λ¦½νΈλ΅ μ™„μ „ μλ™ν™”
- **μΏΌλ¦¬ μ‹¤ν—**: λ…ΈνΈλ¶μ—μ„ μ‹¤μ  μ§λ¬Έ-λ‹µλ³€ ν…μ¤νΈλ§ μ§„ν–‰
- **μ„±λ¥ λ¶„μ„**: κ²°κ³Ό μ‹κ°ν™” λ° ν‰κ°€ (μ„ νƒμ  λ…ΈνΈλ¶ μ‚¬μ©)

### 3. MCP μ„λ²„ (`mcp_server/`)
- **ν‘μ¤€ MCP ν”„λ΅ν† μ½**: JSON-RPC κΈ°λ° ν†µμ‹ 
- **λ„κµ¬ μ κ³µ**: λ¬Έμ„ μ½κΈ°, κ²€μƒ‰, μ§€μ‹ μ•΅μ„Έμ¤ λ„κµ¬
- **Cursor/Claude μ—°κ²°**: IDE λ° AI μ–΄μ‹μ¤ν„΄νΈμ™€ μ§μ ‘ μ—°λ™
- **μ‹¤μ‹κ°„ νμΌ μ ‘κ·Ό**: txt νμΌ κΈ°λ° μ¦‰μ‹ μ‘λ‹µ

## π› οΈ κΈ°μ  μ¤νƒ

### κ³µν†µ (Shared)
- **BeautifulSoup**: ν•κµ­ μ„ν‚¤ ν¬λ΅¤λ§
- **pandas**: λ°μ΄ν„° μ²λ¦¬ λ° κ΄€λ¦¬
- **python-dotenv**: ν™κ²½μ„¤μ • κ΄€λ¦¬

### RAG μ‹μ¤ν…
- **LangChain**: RAG νμ΄ν”„λΌμΈ κµ¬ν„
- **ChromaDB/FAISS**: λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤
- **sentence-transformers**: μ„λ² λ”© μƒμ„±
- **OpenAI/Anthropic API**: LLM μ„λΉ„μ¤
- **Jupyter**: λ€ν™”ν• κ°λ° ν™κ²½

### MCP μ„λ²„
- **mcp λΌμ΄λΈλ¬λ¦¬**: Model Context Protocol κ³µμ‹ SDK
- **JSON-RPC 2.0**: MCP ν‘μ¤€ ν†µμ‹  ν”„λ΅ν† μ½
- **asyncio**: λΉ„λ™κΈ° μ„λ²„ μ²λ¦¬
- **pathlib**: νμΌ μ‹μ¤ν… μ ‘κ·Ό

## π“‹ μ‚¬μ© μ‹λ‚λ¦¬μ¤

### RAG μ›ν¬ν”λ΅μ°
```bash
# π”§ λ‹¨κ³„λ³„ μ¤ν¬λ¦½νΈ μ‹¤ν–‰ (μλ™ν™”)
python rag/scripts/step1_prepare_data.py      # λ°μ΄ν„° μ¤€λΉ„ λ° μ „μ²λ¦¬
python rag/scripts/step2_build_vectordb.py    # λ²΅ν„° DB κµ¬μ¶•  
python rag/scripts/step3_setup_pipeline.py    # RAG νμ΄ν”„λΌμΈ μ„¤μ •
python rag/scripts/step4_validate.py          # νμ΄ν”„λΌμΈ κ²€μ¦

# λλ” μ „μ²΄ λ‹¨κ³„ ν•λ²μ— μ‹¤ν–‰
python rag/scripts/run_all_steps.py

# π― μΏΌλ¦¬ μ‹¤ν— (λ…ΈνΈλ¶ μ‚¬μ©)
jupyter notebook rag/notebooks/query_experiments.ipynb

# π“ μ„±λ¥ λ¶„μ„ (μ„ νƒμ‚¬ν•­)
jupyter notebook rag/notebooks/performance_analysis.ipynb
```

### MCP μ„λ²„ μ‚¬μ©
```bash
# 1. MCP μ„λ²„ μ‹¤ν–‰
python scripts/run_mcp_server.py

# 2. Cursorμ—μ„ MCP μ„λ²„ μ—°κ²°
# - Settings > Extensions > MCP
# - Add server: localhost:8000

# 3. Claude Desktop μ—°κ²°
# - ~/.claude_desktop_config.json μμ •
```

## π― λ…λ¦½μ„± λ° κ³µν†µμ 

### λ…λ¦½μ  μ΄μ
- **RAG**: Jupyter λ…ΈνΈλ¶κ³Ό μ¤ν¬λ¦½νΈλ΅ μ™„μ „ λ…λ¦½ μ‹¤ν–‰
- **MCP**: λ³„λ„ μ„λ²„λ΅ IDE/AI λ„κµ¬μ™€ μ—°λ™
- **μ„λ΅ μμ΅΄μ„± μ—†μ**: κ°κ° λ³„λ„λ΅ κ°λ° λ° ν…μ¤νΈ κ°€λ¥

### κ³µν†µ ν™μ©
- **λ°μ΄ν„° νμ‹±**: λ™μΌν• μ„ν‚¤ λ°μ΄ν„° μ†μ¤ μ‚¬μ©
- **ν…μ¤νΈ μ²λ¦¬**: κ³µν†µ μ „μ²λ¦¬ νμ΄ν”„λΌμΈ
- **μ„¤μ • κ΄€λ¦¬**: ν™κ²½λ³€μ λ° API ν‚¤ κ³µμ 

## π—οΈ μ•„ν‚¤ν…μ² λ‹¤μ΄μ–΄κ·Έλ¨

```
π“ Korean Wikipedia (AI/ML Docs)
         β”‚
         β–Ό
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚   shared/       β”‚ π”„ κ³µν†µ λ¨λ“
   β”‚ data_parser.py  β”‚
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”
             β”‚
      β”β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”
      β–Ό             β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚    RAG/     β”‚   β”‚ mcp_server/ β”‚
β”‚             β”‚   β”‚             β”‚
β”‚ scripts/    β”‚   β”‚   server.py β”‚ π” MCP μ„λ²„  
β”‚ step1-4     β”‚   β”‚   tools/    β”‚
β”‚ (μλ™ν™”)    β”‚   β”‚             β”‚
β”‚             β”‚   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ notebooks/  β”‚          β”‚
β”‚ (μΏΌλ¦¬μ‹¤ν—)  β”‚          β–Ό
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚          β”‚  Cursor/    β”‚
       β–Ό          β”‚  Claude     β”‚ π’» IDE/AI λ„κµ¬
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚  Desktop    β”‚
β”‚  Vector DB  β”‚   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ (ChromaDB)  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### νΉμ§•:
- β… **μ™„μ „ λ…λ¦½**: RAGμ™€ MCPλ” μ„λ΅ μμ΅΄ν•μ§€ μ•μ
- β… **κ³µν†µ λ°μ΄ν„°**: λ™μΌν• μ†μ¤μ—μ„ λ°μ΄ν„° νμ‹±
- β… **ν¨μ¨μ  μ›ν¬ν”λ΅μ°**: 
  - RAG: μ¤ν¬λ¦½νΈλ΅ μλ™ κµ¬μ¶• β†’ λ…ΈνΈλ¶μΌλ΅ μΏΌλ¦¬ μ‹¤ν—
  - MCP: μ„λ²„ μ‹¤ν–‰ β†’ IDEμ—μ„ AI λ„κµ¬λ΅ μ‚¬μ©
- β… **λ‹¨μν•κ³  μ‹¤μ©μ **: λ³µμ΅ν• μ›Ή μΈν„°νμ΄μ¤ μ—†μ΄ λ©μ μ— μ§‘μ¤‘ 